---
title: "Trivariate Viz"
execute: 
  echo: true 
  warning: false
  error: false 
  code-fold: true 
---

Use this file to generate a professional looking **trivariate** visualization.  The visualization will not perfect the first time but you are expected to improve on it throughout the semester especially after covering advanced topics such as effective viz.

```{r}
# Import Education Data
education <- read.csv("https://mac-stat.github.io/data/sat.csv")
head(education)
```

```{r}
# Download Library 
library(ggplot2)

# Create Density Plot
ggplot(education, aes(x = sat, fill = fracCat)) + 
  geom_density(alpha = 0.6) + #Adjust Transparency 
  labs(
    title = "SAT Score Distributions by Student Participation Rate",
    x = "SAT Total Score",
    y = "Density",
    fill = "SAT Participation Rate (%)") +
  theme_minimal() + # Cleaner theme
  theme(
    plot.title = element_text(face = "bold", size = 15, hjust = 0.5), # Make Title Bold and Centered
    legend.position = "right") #Position the Legend on the right 
```

# Reflection 
This visualization demonstrates the relationship between three variables related to education and SAT scores across different states.

1. The x-axis represents student's combined score of the verbal and math sections of the SAT. Higher values indicate better overall performance on the SAT.

2. The y-axis shows shows the probability density of the SAT scores within each category of fracCat. In other words, the height of the curves at any given SAT score shows how concentrated the scores are for states within that fracCat group.

3. The Color/Fill displays the fracCat (Proportion of Students Taking the SAT). This is the third variable, categorized into three groups: States where a very small proportion (0 to 15%) took the SAT; States where a moderate proportion (between 15% and 45%) took the SAT; and States where a high proportion (greater than 45% up to 100%) took the SAT.

The most striking takeaway is the clear inverse relationship between the fraction of students taking the SAT and the overall distribution of SAT scores in a state. In states with low participation, the average scores tend to be inflated.
Conversely, in states with much higher participation, the average scores tend to be lower. 

```{r}
# Create A Scatter Plot with Linear Regression Lines
library(ggplot2)
ggplot(education, aes(x = expend, y = sat, color = fracCat)) +
  geom_point(alpha = 0.7, size = 3) +  #Adjust Transparency and Point Size
  geom_smooth(method = "lm", se = TRUE, linewidth = 1) + # Keep regression lines with confidence intervals
  labs(
    title = "Expenditure Per Student and SAT Scores by Participation Rate",
    x = "Expenditure per Student",
    y = "SAT Total Score",
    color = "SAT Participation Rate") +
  theme_minimal() +
  theme(
    plot.title = element_text(face = "bold", size = 15, hjust = 0.5), # Make Title Bold and Centered
    legend.position = "bottom") # Move the legend to the bottom
```

# Reflection 

This Scatter Plot displays the relationship between two numerical variables, Expenditure Per Student (on the x-axis) and SAT Total Score (on the y-axis). The third variable, SAT Participation Rate, is introduced through the color of the data points and the separate linear regression lines.This trivariate visualization demonstrates that the proportion of students taking the SAT seems to be a stronger predictor of average SAT scores than expenditure per student. States with lower SAT participation rates tend to have higher average scores, regardless of their spending per student. Conversely, states with high participation rates tend to have lower average scores.


